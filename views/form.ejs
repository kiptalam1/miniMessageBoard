<!DOCTYPE html>
<html lang="en">
	<head>
		<link rel="stylesheet" href="/styles.css" />
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title><%= title %></title>
	</head>
	<body>
		<h1><%= title %></h1>
		<form method="POST" action="/new">
			<label for="user">Your Name:</label>
			<input type="text" id="user" name="user" required />
			<br />
			<label for="text">Message:</label>
			<input type="text" id="text" name="text" required />
			<br />
			<button class="form-btn" type="submit">Add</button>
		</form>
	</body>
	<script>
		const form = document.getElementById("message-form");
		form.addEventListener("submit", function (e) {
			const user = form.elements.user.value;
			const text = form.elements.messageText.value;

			// Add to localStorage
			let messages = JSON.parse(localStorage.getItem("messages")) || [];
			messages.push({ user, text, added: new Date() });
			localStorage.setItem("messages", JSON.stringify(messages));
		});
	</script>
</html>
